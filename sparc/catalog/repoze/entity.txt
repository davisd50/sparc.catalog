# Indexed catalog for Sparc entity information

>>> from zope.component import createObject
>>> catalog = createObject('sparc.catalog.repoze.entity_catalog')
>>> doc_map = createObject('sparc.catalog.repoze.document_map')
>>> entity = createObject('sparc.entity.entity',
...                                           id='abc',
...                                           name=u'Entity name',
...                                           description=u'Entity description',
...                                           details=u'Entity details')
>>> doc_id = doc_map.add(entity.getId())
>>> catalog.index_doc(doc_id, entity)

>>> from repoze.catalog.query import Eq
>>> result = catalog.query(Eq('id', 'abc'))
>>> result[0] == 1 # completely stupid, but they mask an int under a ResultSetSize class
True

>>> result[1][0] == doc_id
True

make sure text indexes are not case sensitive
>>> from repoze.catalog.query import Contains
>>> result = catalog.query(Contains('name_text', 'entity'))
>>> result[0] == 1
True
>>> result = catalog.query(Eq('name_text', 'name')) # wierd behavior...leaving here for others to see
>>> result[0] == 1
True
>>> result = catalog.query(Eq('name_text', 'nam*')) # wildcard searches work for text indexes
>>> result[0] == 1
True

field index is case sensitive, however
>>> result = catalog.query(Eq('name', 'entity name'))
>>> result[0] == 0
True
>>> result = catalog.query(Eq('name', 'Entity name'))
>>> result[0] == 1
True
>>> result = catalog.query(Eq('name', 'Entity nam*')) # no wildcards on non-text indexes
>>> result[0] == 0
True